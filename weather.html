<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather</title>
    <!--CSS Style added-->
    <link rel="stylesheet" href="style/style.css">
    <link rel="stylesheet" href="style/weather.css">
    
    <!-- Font Awesome added -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- Boxicon Added -->
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    
</head>
<body>
    <header>
        <!------NAVBAR-------->
        <div class="navbar">
            <div class="logo"><a href="#">AgriTech</a></div>
            <ul class="links">
                <li><a href="index.html">Home</a></li>

                <li class="service-link"><a href="#">Service</a>
                    <ul class="dropdwn-service">
                        <li><a href="shop.html">Farmers shop</a></li>
                        <li><a href="weather.html" class="active">Weather Report</a></li>
                        <li><a href="tutorial.html">Training Tutorial</a></li>
                       <li><a href="crop_management.html">Crop Management</a></li>
                    </ul>
                 </li>

                <li><a href="/blog.html">Blogs</a></li>
                <li><a href="About_us.html">About us</a></li>
            </ul>
            <a href="login.html" class="action-btn">LOG IN</a>
            <div class="search-bar">
                <input type="text" placeholder="Search"><i class="fa-solid fa-magnifying-glass"></i>
            </div>
            <div class="toggle-btn">
                <i class="fa-solid fa-bars"></i>
            </div>

        </div>

        <div class="dropdown-btn">
            <li><a href="index.html">Home</a></li>
            <li><a href="#">Service</a></li>
            <li><a href="blog.html">Blogs</a></li>
            <li><a href="index.html">About us</a></li>
            <li><a href="/login.html" class="action-btn">LOG IN</a></li>
        </div>
    </header>

    <!--content-->
    <!--Current map-->
    <div class="map-container">
        <div class="map-head">Current weather Map</div>
        <iframe width="1000" height="600" src="https://embed.windy.com/embed.html?type=map&location=coordinates&metricRain=default&metricTemp=default&metricWind=default&zoom=5&overlay=wind&product=ecmwf&level=surface&lat=23.12&lon=72.729" frameborder="0"></iframe>
    </div>
    
    
    
    <!--widget-container-->
    <div class="widget-header">Check Weather in your city:</div>
    <div class="card-container">
        <div class="search">
            <input type="text" placeholder="Enter City Name" spellcheck="false">
            <button><img src="/img/search.png" alt=""></button>
        </div>
        <div class="error-msg">
            Invalid Entry
        </div>
        <div class="weather">
            <img src="/img/clouds.png" alt="" class="weather-icon">
            <h1 class="temp">22°C</h1>
            <h2 class="city">New York</h2>
            <div class="details">
                <div class="col">
                    <img src="/img/humidity.png" alt="">
                    <div>
                        <p class="humidity">50%</p>
                        <p>Humidity</p>
                    </div>
                </div>
                <div class="col">
                    <img src="/img/wind.png" alt="">
                    <div>
                        <p class="wind">15 km/h</p>
                        <p>Wind</p>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!------------------->
    




   <!---footer-->
   <footer>
    <div class="about-us sec">
        <h2>About us</h2>
        <p>AgriTech is your trusted partner in modern agriculture. We're dedicated to leveraging technology to empower farmers and revolutionize the way we cultivate the land. From essential farming supplies to weather insights and educational resources, we're here to support every step of your agricultural journey. Join us as we pave the way for a sustainable and prosperous future in agriculture.</p>
            <ul class="sci">
                <li><a href=""><i class="fa-brands fa-facebook"></i></a></li>
                <li><a href=""><i class="fa-brands fa-instagram"></i></a></li>
                <li><a href=""><i class="fa-brands fa-x-twitter"></i></a></li>
                <li><a href=""><i class="fa-brands fa-youtube"></i></a></li>
            </ul>
    </div>
            <div class="quick-links sec">
                <h2>Support</h2>
                <ul>
                    <li><a href="">FAQs</a></li>
                    <li><a href="">Privacy Policy</a></li>
                    <li><a href="">Help</a></li>
                    <li><a href="">Contact</a></li>
                </ul>
            </div>
            <div class="quick-links sec">
                <h2>Shop</h2>
                <ul>
                    <li><a href="shop.html">Pesticide</a></li>
                    <li><a href="shop.html">Animal Husbandary</a></li>
                    <li><a href="shop.html">Seeds</a></li>
                    <li><a href="shop.html">Farm machinery</a></li>
                </ul>
            </div>
            <div class="contact sec">
                <h2>Contact</h2>
                <ul>
                    <li><a href=""><i class="fa-solid fa-phone"></i>tel : +91 9724940264</a></li>
                    <li><a href=""><i class="fa-solid fa-envelope"></i>Mail: abhi37726@gmail.com</a></li>
                    <li><a href=""></a></li>
                </ul>
            </div>
    
</footer>
<div class="copyright">
    <p>Copyright 2024 Learniphi Technology PVT. LTD.</p>
</div>


<script>

const apiKey = "21c7fe89ee08f42b3e42240bbe0882a0"
const apiUrl = "https://api.openweathermap.org/data/2.5/weather?units=metric&q=";

const searchBox = document.querySelector(".search input")
const searchBtn = document.querySelector(".search button")
const weatherIcon = document.querySelector(".weather-icon")

async function checkWeather(city){
    const response = await fetch(apiUrl + city + `&appid=${apiKey}`)
    if(response.status == 404){
        document.querySelector(".error-msg").style.display = "block"
        document.querySelector(".weather").style.display = "none"
    }
    else{
        var data = await response.json();

    console.log(data);
    document.querySelector(".city").innerHTML = data.name
    document.querySelector(".temp").innerHTML = Math.round(data.main.temp )+ "°C"
    document.querySelector(".wind").innerHTML = data.wind.speed + "km/h"
    document.querySelector(".humidity").innerHTML = data.main.humidity + "%"

    if (data.weather[0].main == "Clouds") {
        weatherIcon.src = "/img/clouds.png"
    }
    if (data.weather[0].main == "Clear") {
        weatherIcon.src = "/img/clear.png"
    }
    if (data.weather[0].main == "Rain") {
        weatherIcon.src = "/img/rain.png"
    }
    if (data.weather[0].main == "Drizzle") {
        weatherIcon.src = "/img/drizzle.png"
    }
    if (data.weather[0].main == "Mist") {
        weatherIcon.src = "/img/mist.png"
    }
    
        document.querySelector(".weather").style.display = "block"
        document.querySelector(".error-msg").style.display = "none"
 
    }
    
}


searchBtn.addEventListener("click", ()=>{
    checkWeather(searchBox.value)
})


</script>

</body>
</html>